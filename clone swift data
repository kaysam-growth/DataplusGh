<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SwiftData GH - Premium Data Services</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Premium Gradients */
        .bg-gradient-brand { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); }
        .bg-gradient-dark { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
        
        /* Floating WhatsApp */
        .whatsapp-float {
            position: fixed; bottom: 30px; right: 30px;
            background: #25d366; color: white;
            border-radius: 50%; width: 60px; height: 60px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 25px rgba(37, 211, 102, 0.3);
            z-index: 50; transition: transform 0.2s;
        }
        .whatsapp-float:active { transform: scale(0.9); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased selection:bg-blue-100 selection:text-blue-900">

    <div id="app" class="min-h-screen flex flex-col">
        
        <div id="announcement-bar"></div>

        <nav class="glass border-b border-slate-200/60 sticky top-0 z-40">
            <div class="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
                <div onclick="router.navigate('home')" class="cursor-pointer flex items-center gap-3">
                    <div class="w-9 h-9 bg-blue-600 text-white rounded-xl flex items-center justify-center shadow-lg shadow-blue-600/20">
                        <i data-lucide="zap" class="w-5 h-5 fill-current"></i>
                    </div>
                    <div>
                        <h1 class="font-extrabold text-lg leading-none tracking-tight text-slate-900">SwiftData GH</h1>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-0.5">Automated System</p>
                    </div>
                </div>
                
                <div class="flex items-center gap-3">
                    <button onclick="router.navigate('track')" class="p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-all">
                        <i data-lucide="search" class="w-5 h-5"></i>
                    </button>
                    <div class="hidden md:flex h-8 w-px bg-slate-200"></div>
                    <div class="hidden md:flex items-center gap-2 px-3 py-1.5 bg-green-50 text-green-700 rounded-full border border-green-100">
                        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                        <span class="text-xs font-bold uppercase tracking-wide">System Online</span>
                    </div>
                </div>
            </div>
        </nav>

        <main id="main-content" class="flex-grow flex flex-col">
            <div class="flex-grow flex flex-col items-center justify-center p-8">
                <div class="relative">
                    <div class="w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"></div>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <i data-lucide="wifi" class="w-6 h-6 text-blue-600"></i>
                    </div>
                </div>
                <p class="mt-6 text-slate-400 font-bold text-sm tracking-widest uppercase animate-pulse">Connecting to Server...</p>
            </div>
        </main>

        <footer class="bg-gradient-dark text-slate-400 py-16">
            <div class="max-w-5xl mx-auto px-6 text-center">
                
                <div class="mb-12">
                    <div class="inline-flex items-center justify-center w-12 h-12 bg-slate-800 rounded-2xl mb-6 shadow-xl ring-1 ring-slate-700">
                        <i data-lucide="shield-check" class="w-6 h-6 text-blue-500"></i>
                    </div>
                    <h3 class="text-white font-bold text-2xl mb-2">Verified Merchant</h3>
                    <p class="text-slate-500 text-sm">Official Data Reseller. Secure Payments via Paystack.</p>
                </div>

                <div class="grid md:grid-cols-3 gap-8 mb-12 border-t border-slate-800/50 pt-12">
                    <div class="space-y-1">
                        <p class="text-xs font-bold uppercase tracking-widest text-slate-500 mb-2">Location</p>
                        <p class="text-white text-sm font-medium">Near the SIC Building Complex</p>
                        <p class="text-slate-400 text-sm">Koforidua, Ghana</p>
                    </div>
                    <div class="space-y-1">
                        <p class="text-xs font-bold uppercase tracking-widest text-slate-500 mb-2">Support</p>
                        <p class="text-white text-sm font-medium flex items-center justify-center gap-2"><i data-lucide="phone" class="w-3 h-3"></i> 0532942413</p>
                        <p class="text-slate-400 text-sm flex items-center justify-center gap-2"><i data-lucide="mail" class="w-3 h-3"></i> omarisamuel641@gmail.com</p>
                    </div>
                    <div class="space-y-3">
                        <p class="text-xs font-bold uppercase tracking-widest text-slate-500">Security</p>
                        <div class="flex justify-center gap-3 opacity-50">
                            <i data-lucide="lock" class="w-5 h-5"></i>
                            <i data-lucide="credit-card" class="w-5 h-5"></i>
                            <i data-lucide="server" class="w-5 h-5"></i>
                        </div>
                    </div>
                </div>

                <div class="text-[10px] font-bold uppercase tracking-[0.2em] text-slate-600 flex flex-col md:flex-row items-center justify-center gap-6">
                    <span>&copy; <span id="year">2024</span> SwiftData GH</span>
                    <button onclick="router.navigate('login')" class="hover:text-white transition-colors">Admin Access</button>
                </div>
            </div>
        </footer>

        <a href="https://wa.me/233554222103" target="_blank" class="whatsapp-float">
            <i data-lucide="message-circle" class="w-8 h-8 fill-current"></i>
        </a>

        <div id="success-modal" class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
            <div class="bg-white rounded-[2rem] w-full max-w-sm p-8 shadow-2xl text-center relative overflow-hidden fade-in">
                <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-cyan-400"></div>
                <div class="w-20 h-20 bg-green-50 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i data-lucide="check" class="w-10 h-10 stroke-[3]"></i>
                </div>
                <h3 id="success-title" class="text-2xl font-bold text-slate-900 mb-2">Order Confirmed</h3>
                <p id="success-msg" class="text-slate-500 text-sm mb-8">Your request is being processed.</p>
                <button onclick="closeSuccessModal()" class="w-full py-4 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 transition-all">Continue Shopping</button>
            </div>
        </div>

    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc, serverTimestamp, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

        // CONFIGURATION
        const ADMIN_PIN = "0202148015@Gh";
        const MOMO_ACCOUNT = "0554222103";
        const MOMO_NAME = "SAMUEL OMARI";
        const MOMO_NETWORK = "MTN";

        // FIREBASE KEYS
        const firebaseConfig = {
            apiKey: "AIzaSyBVTQqx3fpkpUeCRO5B4N9Hb8dDxJGDIsg",
            authDomain: "swiftdata-32d80.firebaseapp.com",
            projectId: "swiftdata-32d80",
            storageBucket: "swiftdata-32d80.firebasestorage.app",
            messagingSenderId: "112123396026",
            appId: "1:112123396026:web:8673fe7a2e5b77e2156783",
            measurementId: "G-GPS00TXFLD"
        };

        // INITIALIZE
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'swiftdata-store-v1';

        // STATE MANAGEMENT
        let state = {
            user: null,
            view: 'home',
            isAdmin: false,
            adminTab: 'orders',
            selectedNetwork: 'MTN',
            selectedBundle: null,
            paymentMethod: 'paystack',
            recipientPhone: '',
            recipientPhoneConfirm: '',
            orders: [],
            products: [],
            settings: { paystackPublicKey: '' },
            announcement: { text: '', active: false },
            isLoaded: false,
            trackingPhone: '',
            trackedOrders: []
        };

        // ROUTER
        window.router = {
            navigate: (view) => {
                state.view = view;
                render();
                window.scrollTo(0, 0);
            }
        };

        // INIT
        async function init() {
            document.getElementById('year').innerText = new Date().getFullYear();
            
            // Auth Listener
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    state.user = user;
                    
                    // Load Settings
                    const sDoc = await getDoc(doc(db, 'artifacts', appId, 'public', 'data', 'config', 'settings_doc'));
                    if (sDoc.exists()) state.settings = sDoc.data();
                    
                    // Load Announcement Listener
                    onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'config', 'announcement'), (d) => {
                        if (d.exists()) state.announcement = d.data();
                        if (state.isLoaded) renderAnnouncement();
                    });

                    // Load Products Listener (Main Boot Trigger)
                    onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'products'), (snap) => {
                        state.products = snap.docs.map(d => ({ id: d.id, ...d.data() }));
                        state.isLoaded = true;
                        render();
                        renderAnnouncement();
                    });
                } else {
                    await signInAnonymously(auth);
                }
            });
        }

        // RENDER CORE
        function render() {
            const main = document.getElementById('main-content');
            if (!state.isLoaded && state.view !== 'login') return;

            switch(state.view) {
                case 'home': main.innerHTML = renderHome(); break;
                case 'checkout': main.innerHTML = renderCheckout(); break;
                case 'track': main.innerHTML = renderTracking(); break;
                case 'login': main.innerHTML = renderLogin(); break;
                case 'admin': main.innerHTML = renderAdmin(); break;
            }
            if (window.lucide) window.lucide.createIcons();
        }

        function renderAnnouncement() {
            const bar = document.getElementById('announcement-bar');
            if (state.announcement?.active && state.announcement?.text) {
                bar.innerHTML = `
                    <div class="bg-blue-600 text-white p-3 text-center text-xs font-bold uppercase tracking-widest sticky top-0 z-50 shadow-md flex justify-center items-center gap-2">
                        <i data-lucide="megaphone" class="w-4 h-4"></i>
                        <span>${state.announcement.text}</span>
                    </div>
                `;
                if (window.lucide) window.lucide.createIcons();
            } else {
                bar.innerHTML = '';
            }
        }

        // VIEW: HOME
        function renderHome() {
            const filtered = state.products.filter(p => p.network === state.selectedNetwork);
            
            return `
                <div class="max-w-5xl mx-auto px-4 py-8 w-full fade-in">
                    <div class="bg-gradient-brand rounded-[2.5rem] p-8 md:p-12 text-white mb-10 shadow-xl relative overflow-hidden">
                        <div class="relative z-10">
                            <span class="inline-block bg-white/20 backdrop-blur-md px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-[0.2em] mb-4 border border-white/10">Official Store</span>
                            <h2 class="text-3xl md:text-5xl font-extrabold mb-4 tracking-tight">Instant Data.<br>Unbeatable Rates.</h2>
                            <p class="text-blue-100 font-medium max-w-md text-sm md:text-base leading-relaxed">Secure automated delivery for MTN, Telecel, and AT. Experience the fastest service in Ghana.</p>
                        </div>
                        <div class="absolute right-0 top-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16"></div>
                        <div class="absolute bottom-0 right-10 opacity-20 transform rotate-12">
                            <i data-lucide="wifi" class="w-48 h-48"></i>
                        </div>
                    </div>

                    <div class="flex p-1 bg-white border border-slate-100 rounded-2xl mb-10 shadow-sm max-w-lg mx-auto">
                        ${['MTN', 'Telecel', 'AT'].map(net => `
                            <button onclick="selectNetwork('${net}')" class="flex-1 py-3 rounded-xl text-sm font-bold transition-all ${state.selectedNetwork === net ? 'bg-slate-900 text-white shadow-md' : 'text-slate-500 hover:bg-slate-50'}">${net}</button>
                        `).join('')}
                    </div>

                    ${filtered.length > 0 ? `
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10">
                            ${filtered.map(b => `
                                <div onclick="selectBundle('${b.id}')" class="group bg-white p-6 rounded-[1.5rem] border border-slate-100 hover:border-blue-500 hover:shadow-xl hover:shadow-blue-500/10 transition-all cursor-pointer relative overflow-hidden">
                                    <div class="flex justify-between items-start mb-4">
                                        <div class="w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors">
                                            <i data-lucide="package" class="w-5 h-5"></i>
                                        </div>
                                        <span class="bg-slate-100 text-slate-600 text-[10px] font-bold px-2 py-1 rounded-md uppercase tracking-wider group-hover:bg-blue-50 group-hover:text-blue-600">${b.network}</span>
                                    </div>
                                    <h3 class="text-2xl font-extrabold text-slate-800 mb-1">${b.size}</h3>
                                    <p class="text-slate-400 text-xs font-medium mb-4">High Speed • No Expiry</p>
                                    <div class="flex justify-between items-center border-t border-slate-50 pt-4">
                                        <span class="text-xl font-bold text-blue-600">GHS ${parseFloat(b.price).toFixed(2)}</span>
                                        <div class="w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center group-hover:translate-x-1 transition-transform">
                                            <i data-lucide="arrow-right" class="w-4 h-4 text-slate-400 group-hover:text-blue-600"></i>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : `
                        <div class="text-center py-20 bg-white rounded-[2.5rem] border border-slate-100 border-dashed">
                            <p class="text-slate-400 font-bold uppercase tracking-widest text-xs">Stock Updating...</p>
                        </div>
                    `}
                </div>
            `;
        }

        // VIEW: CHECKOUT
        function renderCheckout() {
            if (!state.selectedBundle) { router.navigate('home'); return ''; }
            const fee = state.paymentMethod === 'paystack' ? 0.02 : 0.01;
            const total = (parseFloat(state.selectedBundle.price) * (1 + fee)).toFixed(2);
            const isValid = state.recipientPhone.length === 10 && state.recipientPhone === state.recipientPhoneConfirm;

            return `
                <div class="max-w-xl mx-auto px-4 py-8 fade-in">
                    <button onclick="router.navigate('home')" class="mb-6 flex items-center gap-2 text-slate-500 hover:text-slate-900 transition-colors font-bold text-xs uppercase tracking-widest">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i> Back
                    </button>
                    
                    <div class="bg-white rounded-[2.5rem] shadow-xl p-6 md:p-10 border border-slate-100">
                        <div class="flex items-center gap-4 mb-8">
                             <div class="w-14 h-14 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center">
                                <i data-lucide="shopping-bag" class="w-7 h-7"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl font-extrabold text-slate-900">Checkout</h2>
                                <p class="text-slate-500 text-sm font-medium">Complete your purchase safely</p>
                            </div>
                        </div>

                        <div class="bg-slate-50 rounded-2xl p-6 mb-8 border border-slate-100">
                            <div class="flex justify-between mb-2">
                                <span class="text-slate-500 text-sm font-medium">Package</span>
                                <span class="font-bold text-slate-900">${state.selectedNetwork} ${state.selectedBundle.size}</span>
                            </div>
                            <div class="flex justify-between items-center pt-4 border-t border-slate-200">
                                <span class="text-slate-900 font-bold">Total Payable</span>
                                <span class="text-2xl font-extrabold text-blue-600">GHS ${total}</span>
                            </div>
                        </div>

                        <div class="space-y-4 mb-8">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1">Recipient Number</label>
                                    <input type="tel" value="${state.recipientPhone}" oninput="updateCheckoutInput('recipientPhone', this.value)" placeholder="05XXXXXXXX" class="w-full bg-slate-50 border-2 border-transparent focus:border-blue
-600 rounded-xl p-4 font-bold outline-none transition-all">
                                </div>
                                <div>
                                    <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1">Confirm Number</label>
                                    <input type="tel" value="${state.recipientPhoneConfirm}" oninput="updateCheckoutInput('recipientPhoneConfirm', this.value)" placeholder="Confirm Number" class="w-full bg-slate-50 border-2 border-transparent focus:border-blue-600 rounded-xl p-4 font-bold outline-none transition-all">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1">Payment Method</label>
                                <div class="grid grid-cols-2 gap-3">
                                    <button onclick="setPaymentMethod('paystack')" class="p-4 rounded-xl border-2 font-bold text-xs flex flex-col items-center gap-2 transition-all ${state.paymentMethod === 'paystack' ? 'border-blue-600 bg-blue-50 text-blue-700' : 'border-slate-100 text-slate-400 hover:border-slate-200'}">
                                        <i data-lucide="credit-card" class="w-5 h-5"></i> PAYSTACK
                                    </button>
                                    <button onclick="setPaymentMethod('momo')" class="p-4 rounded-xl border-2 font-bold text-xs flex flex-col items-center gap-2 transition-all ${state.paymentMethod === 'momo' ? 'border-amber-500 bg-amber-50 text-amber-700' : 'border-slate-100 text-slate-400 hover:border-slate-200'}">
                                        <i data-lucide="smartphone" class="w-5 h-5"></i> MANUAL MOMO
                                    </button>
                                </div>
                            </div>
                        </div>

                        ${state.paymentMethod === 'paystack' ? `
                            <form onsubmit="handlePaystack(event)" class="space-y-4 animate-in fade-in slide-in-from-bottom-4">
                                <div>
                                    <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1">Receipt Email</label>
                                    <input type="email" id="cEmail" required placeholder="name@email.com" class="w-full bg-slate-50 border-2 border-transparent focus:border-blue-600 rounded-xl p-4 font-bold outline-none transition-all">
                                </div>
                                <button type="submit" ${!isValid ? 'disabled' : ''} class="w-full py-5 bg-blue-600 text-white rounded-xl font-black text-lg shadow-lg shadow-blue-600/30 hover:bg-blue-700 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
                                    <span>Pay GHS ${total}</span>
                                    <i data-lucide="lock" class="w-4 h-4 opacity-70"></i>
                                </button>
                            </form>
                        ` : `
                            <div class="bg-amber-50 p-6 rounded-2xl border border-amber-100 space-y-4 animate-in fade-in slide-in-from-bottom-4">
                                <div class="bg-white p-4 rounded-xl border border-amber-100/50 shadow-sm text-sm space-y-2">
                                    <div class="flex justify-between">
                                        <span class="text-slate-400 font-bold">MoMo Number</span>
                                        <span class="font-black text-slate-800">${MOMO_ACCOUNT}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-400 font-bold">Account Name</span>
                                        <span class="font-black text-slate-800">${MOMO_NAME}</span>
                                    </div>
                                </div>
                                <input id="momoSender" placeholder="Your MoMo Name" class="w-full p-4 border-2 border-transparent focus:border-amber-500 rounded-xl font-bold text-sm outline-none">
                                <input id="momoTrans" placeholder="Transaction ID" class="w-full p-4 border-2 border-transparent focus:border-amber-500 rounded-xl font-bold text-sm outline-none">
                                <button onclick="handleManualMomo()" ${!isValid ? 'disabled' : ''} class="w-full py-5 bg-amber-600 text-white rounded-xl font-black shadow-lg shadow-amber-600/20 hover:bg-amber-700 active:scale-95 transition-all disabled:opacity-50">CONFIRM TRANSFER</button>
                            </div>
                        `}
                    </div>
                </div>`;
        }

        // VIEW: TRACKING
        function renderTracking() {
            return `
                <div class="max-w-2xl mx-auto px-4 py-8 fade-in">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-extrabold text-slate-900 mb-2">Track Order</h2>
                        <p class="text-slate-500 font-medium">Check the live status of your delivery</p>
                    </div>

                    <div class="bg-white p-2 rounded-2xl shadow-lg border border-slate-100 flex gap-2 mb-8">
                        <input type="tel" id="trackPhoneInput" value="${state.trackingPhone}" placeholder="Enter Recipient Number" class="flex-grow p-4 rounded-xl font-bold outline-none bg-transparent">
                        <button onclick="handleTrack()" class="bg-slate-900 text-white px-6 rounded-xl font-bold hover:bg-slate-800 transition-colors">Search</button>
                    </div>

                    <div class="space-y-4">
                        ${state.trackedOrders.length > 0 ? state.trackedOrders.map(o => `
                            <div class="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex items-center justify-between">
                                <div>
                                    <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">${o.createdAt ? new Date(o.createdAt?.toDate()).toLocaleString() : 'Just now'}</div>
                                    <div class="font-black text-lg text-slate-800">${o.network} ${o.bundleSize}</div>
                                </div>
                                <span class="px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest ${getStatusClass(o.status)}">
                                    ${o.status}
                                </span>
                            </div>
                        `).join('') : state.trackingPhone ? '<div class="text-center text-slate-400 font-bold py-10">No orders found for this number</div>' : ''}
                    </div>
                </div>`;
        }

        // VIEW: ADMIN
        function renderAdmin() {
            if (!state.isAdmin) return renderLogin();
            const ordersToRender = state.adminTab === 'manual' ? state.orders.filter(o => o.method === 'momo') : state.orders.filter(o => o.method !== 'momo');

            return `
                <div class="min-h-screen bg-slate-50 pb-20">
                    <div class="bg-white border-b border-slate-200 sticky top-0 z-30 px-4 py-4">
                        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                            <span class="font-black text-xl text-blue-600 flex items-center gap-2"><i data-lucide="shield" class="w-5 h-5"></i> Admin Console</span>
                            <div class="flex gap-2 p-1 bg-slate-100 rounded-xl">
                                ${['orders', 'manual', 'products', 'settings'].map(t => `
                                    <button onclick="setAdminTab('${t}')" class="px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${state.adminTab === t ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-400 hover:text-slate-600'}">${t}</button>
                                `).join('')}
                            </div>
                        </div>
                    </div>

                    <div class="max-w-6xl mx-auto p-4 md:p-8">
                        ${state.adminTab === 'settings' ? renderAdminSettings() : 
                          state.adminTab === 'products' ? renderAdminProducts() : 
                          renderOrderList(ordersToRender)}
                    </div>
                </div>`;
        }

        function renderOrderList(orders) {
            return `
                <div class="grid gap-4">
                    ${orders.map(o => `
                        <div class="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex flex-col md:flex-row justify-between gap-6 hover:shadow-md transition-all">
                            <div>
                                <div class="flex items-center gap-3 mb-2">
                                    <span class="px-2 py-1 rounded bg-blue-50 text-blue-700 text-[10px] font-black uppercase">${o.network}</span>
                                    <span class="font-black text-lg text-slate-800">${o.bundleSize}</span>
                                    <span class="text-slate-400 text-xs font-bold">GHS ${o.price}</span>
                                </div>
                                <div class="text-2xl font-black text-slate-900 mb-2">${o.recipientPhone}</div>
                                ${o.method === 'momo' ? `
                                    <div class="text-xs bg-amber-50 text-amber-800 p-2 rounded-lg font-mono border border-amber-100 inline-block">
                                        <b>${o.senderName}</b> • ID: ${o.transId}
                                    </div>
                                ` : ''}
                                <div class="text-[10px] text-slate-400 font-bold mt-2 uppercase tracking-wider">${o.createdAt ? new Date(o.createdAt?.toDate()).toLocaleString() : 'Just now'}</div>
                            </div>
                            
                            <div class="flex flex-col gap-3 min-w-[180px]">
                                <select onchange="updateOrderStatus('${o.id}', this.value)" class="w-full p-3 bg-slate-50 border-2 border-transparent focus:border-blue-500 rounded-xl text-xs font-bold outline-none">
                                    <option value="pending" ${o.status==='pending'?'selected':''}>
